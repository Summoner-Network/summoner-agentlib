# Starter Template

This repository is a **starter template** for building Python and Rust projects that integrate with [Summoner’s core codebase](https://github.com/Summoner-Network/summoner-core) for client/server communication.

It bootstraps a virtual environment, installs all dependencies, and provides tooling to validate the setup and run a test server.

## Getting Started

To create your own project using this starter:

<p align="center">
  <img width="450px" src="img/use_template.png" alt="Use this template button screenshot" />
</p>

1. Click the **"Use this template"** button at the top of the [GitHub repository page](https://github.com/Summoner-Network/starter-template).
2. Select **"Create a new repository"**.
3. Name your project and click **"Create repository from template"**.

This will create your own copy of the repo that you can clone and start working from.

## Installation

First, clone the template repository and navigate into it:

```bash
git clone https://github.com/Summoner-Network/starter-template.git
cd starter-template
````

Then, to install Summoner’s core codebase and its Python and Rust dependencies:

```bash
source install.sh setup
```

This will:

* Clone Summoner’s core codebase into `core/`
* Create a virtual environment in `venv/`
* Install all required Python and Rust packages
* Install the core package into the environment

### Optional: Using `bash` Instead of `source`

You may also run:

```bash
bash install.sh setup
```

However, if you do, you will need to **activate the virtual environment manually**:

```bash
source venv/bin/activate
```

## Verifying the Installation

To launch a test server:

```bash
bash install.sh test_server
```

This will:

* Create `test_server.py`
* Create `test_server_config.json`
* Launch the server using the installed Summoner core package
* Generate `test_Server.log`

You should see no import errors in `test_server.py` (if not, see [VSCode Integration](#vscode-integration)). In particular, this line should be recognized:

```python
from summoner.server import SummonerServer
```

### VSCode Integration

To ensure VSCode recognizes the Summoner core dependency and your virtual environment:

1. Open the Command Palette: `Ctrl+Shift+P` (or `Cmd+Shift+P` on macOS)
2. Run: `Python: Select Interpreter`
3. Select the one labeled `'venv':venv`
4. close and reopen the file `test_server.py`

Once selected, VSCode will resolve `summoner` correctly as a dependency installed in `venv/lib`.

## Cleaning and Resetting

To clean generated test files:

```bash
bash install.sh clean
```

This removes:

* Any `test_*.py` files
* Any `test_*.json` files
* Any `test_*.log` files

To fully reset the setup (delete `venv/` and `core/` and reinstall everything):

```bash
bash install.sh reset
```

To delete all environment and Summoner core files:

```bash
bash install.sh delete
```

## Using the Summoner Core in Your Project

While the virtual environment is active:

```bash
source venv/bin/activate
```

You can import and use `summoner` like any other Python package:

```python
from summoner.server import SummonerServer
```

It is installed inside `venv/lib` along with all other dependencies.

## Repo Structure (Initial)

```
├── img/                     # Images used in the README
├── install.sh               # Bootstrap script for setup and testing
├── README.md
└── tooling/                 # Your native package goes here
```

After running `install.sh setup` and `install.sh test_server`, the structure will look like:

```
├── core/                    # Temporary clone of the Summoner SDK
├── tooling/                 # Your in-development native module
├── venv/                    # Python virtual environment
├── test_server.py           # Autogenerated test file
├── test_server_config.json
├── test_Server.log
└── ...
```

Your native module will be injected into the SDK structure automatically during setup.


## Developing a Native Module (`tooling/`)

Write your package inside the `tooling/` directory. For example:

```
tooling/your_package/
├── __init__.py         # e.g. contains: from .agent import Agent
├── agent.py
└── ...
````

In your `__init__.py`, re-export what you want to expose. This allows you to write:

```python
from tooling.your_package import Agent
````

To make this import work at build time when integrated into the SDK, add the following to the top of your Python files:

```python
import sys, os
target_path = os.path.abspath(os.path.join(os.path.dirname(os.path.abspath(__file__)), ".."))
if target_path not in sys.path:
    sys.path.insert(0, target_path)
```

This ensures Python can resolve your package inside the `summoner/` folder once your code is moved into the SDK.


## SDK Construction

When building the SDK, a script similar to `install.sh setup` will:

* Clone the `summoner-core` repository
* Copy your folder `tooling/your_package/` into the core’s `summoner/` directory
* Replace all import statements of the form:

```python
from tooling.your_package import Agent
from summoner.your_package import Agent
```

with the cleaner form:

```python
from your_package import Agent
```

These imports will work as long as each file includes the same `sys.path` insert block, adapted to its directory depth:

```python
import sys, os
target_path = os.path.abspath(os.path.join(os.path.dirname(os.path.abspath(__file__)), ".."))
if target_path not in sys.path:
    sys.path.insert(0, target_path)
```

This allows your code to be seamlessly tested in development and then integrated cleanly into the final `summoner` package structure.

## Resources

* [Summoner Core GitHub Repository](https://github.com/Summoner-Network/summoner-core)
